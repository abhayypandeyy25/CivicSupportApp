{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":54,"index":144}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"firebase/auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":145},"end":{"line":17,"column":23,"index":457}}],"key":"o2UvaebosmgxImAY7KlhPO3FnYs=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":458},"end":{"line":18,"column":69,"index":527}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,'__esModule',{value:!0}),_e.AuthProvider=function({children:e}){const[s,h]=(0,t.useState)(null),[w,v]=(0,t.useState)(!0),[I,y]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(o.isDemoMode)return void u.default.getItem('demoLoggedIn').then(e=>{'true'===e&&(h(l),y('demo-token-for-local-testing')),v(!1)});if(!o.auth)return void v(!1);const e=(0,n.onAuthStateChanged)(o.auth,async e=>{if(h(e),e){const t=await e.getIdToken();y(t),await u.default.setItem('userToken',t)}else y(null),await u.default.removeItem('userToken');v(!1)});return(0,n.getRedirectResult)(o.auth).then(e=>{e?.user&&console.log('Redirect sign-in successful')}).catch(e=>{console.error('Redirect error:',e)}),e},[]);const k=async()=>{try{return h(l),y('demo-token-for-local-testing'),await u.default.setItem('demoLoggedIn','true'),await u.default.setItem('userToken','demo-token-for-local-testing'),console.log('Demo sign-in successful'),!0}catch(e){return console.error('Error in demo sign-in:',e),!1}};return(0,c.jsx)(f.Provider,{value:{user:s,loading:w,token:I,isDemoMode:o.isDemoMode,sendOTP:async(e,t)=>{if(o.isDemoMode)return console.log('Demo mode: Simulating OTP send to',e),{confirm:async e=>{if('123456'===e)return await k(),{user:l};throw new Error('Invalid OTP')},verificationId:'demo-verification-id'};try{if(!o.auth)throw new Error('Firebase not initialized');return await(0,n.signInWithPhoneNumber)(o.auth,e,t)}catch(e){throw console.error('Error sending OTP:',e),e}},verifyOTP:async(e,t)=>{try{return!!(await e.confirm(t)).user}catch(e){return console.error('Error verifying OTP:',e),!1}},signInWithGoogle:async()=>{if(o.isDemoMode)return k();try{if(o.auth){const e=new n.GoogleAuthProvider;e.addScope('email'),e.addScope('profile');try{return!!(await(0,n.signInWithPopup)(o.auth,e)).user}catch(t){if('auth/popup-blocked'===t.code||'auth/popup-closed-by-user'===t.code)return await(0,n.signInWithRedirect)(o.auth,e),!0;throw t}}return!1}catch(e){throw console.error('Error signing in with Google:',e),e}},signInDemo:k,signOut:async()=>{try{if(o.isDemoMode)return h(null),y(null),await u.default.removeItem('demoLoggedIn'),void await u.default.removeItem('userToken');o.auth&&await(0,n.signOut)(o.auth),await u.default.removeItem('userToken')}catch(e){console.error('Error signing out:',e)}},refreshToken:async()=>{if(o.isDemoMode)return'demo-token-for-local-testing';if(s){const e=await s.getIdToken(!0);return y(e),await u.default.setItem('userToken',e),e}return null}},children:e})},_e.useAuth=function(){const e=(0,t.useContext)(f);if(void 0===e)throw new Error('useAuth must be used within an AuthProvider');return e};var e,t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]),u=(e=s)&&e.__esModule?e:{default:e};r(d[4]);var c=r(d[5]);const l={uid:'demo-user-123',email:'demo@civicsense.local',displayName:'Demo User',phoneNumber:'+1234567890',photoURL:null,emailVerified:!0,getIdToken:async()=>'demo-token-for-local-testing',getIdTokenResult:async()=>({token:'demo-token-for-local-testing',claims:{}})},f=(0,t.createContext)(void 0)});","lineCount":1,"map":[[1,92,48,0,"_e"],[1,95,48,0,"AuthProvider"],[1,108,48,7],[1,118,48,29,"children"],[1,127,48,31,"children"],[1,131,49,2],[1,137,49,9,"user"],[1,139,49,15,"setUser"],[1,143,49,26],[1,145,49,26,"useState"],[1,147,49,34,"useState"],[1,157,49,48],[1,164,50,9,"loading"],[1,166,50,18,"setLoading"],[1,170,50,32],[1,172,50,32,"useState"],[1,174,50,40,"useState"],[1,185,50,41],[1,189,51,9,"token"],[1,191,51,16,"setToken"],[1,195,51,28],[1,197,51,28,"useState"],[1,199,51,36,"useState"],[1,209,51,52],[1,216,53,2],[1,218,53,2,"useEffect"],[1,220,53,11,"useEffect"],[1,231,53,12],[1,236,55,4],[1,239,55,8,"isDemoMode"],[1,241,55,18,"isDemoMode"],[1,252,63,6],[1,264,56,6,"AsyncStorage"],[1,266,56,18,"default"],[1,274,56,19,"getItem"],[1,282,56,27],[1,298,56,43,"then"],[1,303,56,49,"value"],[1,307,57,22],[1,316,57,12,"value"],[1,320,58,10,"setUser"],[1,322,58,18,"DEMO_USER"],[1,325,59,10,"setToken"],[1,327,59,19],[1,360,61,8,"setLoading"],[1,363,61,19],[1,368,67,4],[1,372,67,9,"auth"],[1,374,67,13,"auth"],[1,379,69,6],[1,391,68,6,"setLoading"],[1,394,68,17],[1,397,72,4],[1,403,72,10,"unsubscribe"],[1,406,72,24],[1,408,72,24,"onAuthStateChanged"],[1,410,72,42,"onAuthStateChanged"],[1,430,72,43,"auth"],[1,432,72,47,"auth"],[1,437,72,49,"async"],[1,447,74,6],[1,450,73,6,"setUser"],[1,452,73,14,"user"],[1,455,74,10,"user"],[1,457,74,16],[1,458,75,8],[1,464,75,14,"idToken"],[1,472,75,30,"user"],[1,474,75,35,"getIdToken"],[1,487,76,8,"setToken"],[1,489,76,17,"idToken"],[1,498,77,14,"AsyncStorage"],[1,500,77,26,"default"],[1,508,77,27,"setItem"],[1,516,77,35],[1,528,77,48,"idToken"],[1,530,78,6],[1,536,79,8,"setToken"],[1,538,79,17],[1,550,80,14,"AsyncStorage"],[1,552,80,26,"default"],[1,560,80,27,"removeItem"],[1,571,80,38],[1,584,82,6,"setLoading"],[1,587,82,17],[1,592,96,4],[1,599,87,6],[1,601,87,6,"getRedirectResult"],[1,603,87,23,"getRedirectResult"],[1,622,87,24,"auth"],[1,624,87,28,"auth"],[1,630,87,30,"then"],[1,635,87,36,"result"],[1,639,88,12,"result"],[1,642,88,20,"user"],[1,648,89,10,"console"],[1,656,89,18,"log"],[1,660,89,22],[1,693,91,9,"catch"],[1,699,91,16,"error"],[1,703,92,8,"console"],[1,711,92,16,"error"],[1,717,92,22],[1,735,92,41,"error"],[1,740,96,11,"unsubscribe"],[1,743,97,5],[1,747,99,2],[1,753,168,8,"signInDemo"],[1,755,168,21,"async"],[1,765,169,4],[1,769,175,6],[1,776,170,6,"setUser"],[1,778,170,14,"DEMO_USER"],[1,781,171,6,"setToken"],[1,783,171,15],[1,821,172,12,"AsyncStorage"],[1,823,172,24,"default"],[1,831,172,25,"setItem"],[1,839,172,33],[1,854,172,49],[1,868,173,12,"AsyncStorage"],[1,870,173,24,"default"],[1,878,173,25,"setItem"],[1,886,173,33],[1,898,173,46],[1,930,174,6,"console"],[1,938,174,14,"log"],[1,942,174,18],[1,970,175,13],[1,971,176,4],[1,972,176,6],[1,978,176,13,"error"],[1,981,178,6],[1,988,177,6,"console"],[1,996,177,14,"error"],[1,1002,177,20],[1,1027,177,46,"error"],[1,1031,178,13],[1,1032,179,4],[1,1035,215,2],[1,1042,216,4],[1,1044,216,4,"_reactJsxRuntime"],[1,1046,216,4,"jsx"],[1,1051,216,5,"AuthContext"],[1,1053,216,17,"Provider"],[1,1062,216,25],[1,1063,217,6,"value"],[1,1069,217,13],[1,1070,218,8,"user"],[1,1077,219,8,"loading"],[1,1087,220,8,"token"],[1,1095,221,8,"isDemoMode"],[1,1108,221,18,"isDemoMode"],[1,1119,222,8,"sendOTP"],[1,1127,99,18,"async"],[1,1133,99,25,"phoneNumber"],[1,1135,99,46,"recaptchaVerifier"],[1,1140,101,4],[1,1143,101,8,"isDemoMode"],[1,1145,101,18,"isDemoMode"],[1,1156,103,6],[1,1163,102,6,"console"],[1,1171,102,14,"log"],[1,1175,102,18],[1,1211,102,55,"phoneNumber"],[1,1214,103,13],[1,1215,104,8,"confirm"],[1,1223,104,17,"async"],[1,1233,105,10],[1,1236,105,23],[1,1247,105,14,"code"],[1,1249,107,12],[1,1262,106,18,"signInDemo"],[1,1266,107,19],[1,1267,107,21,"user"],[1,1272,107,27,"DEMO_USER"],[1,1275,109,10],[1,1281,109,16],[1,1285,109,20,"Error"],[1,1291,109,26],[1,1307,111,8,"verificationId"],[1,1322,111,24],[1,1346,115,4],[1,1350,116,6],[1,1354,116,11,"auth"],[1,1356,116,15,"auth"],[1,1361,116,17],[1,1367,116,23],[1,1371,116,27,"Error"],[1,1377,116,33],[1,1405,118,6],[1,1418,117,39],[1,1420,117,39,"signInWithPhoneNumber"],[1,1422,117,60,"signInWithPhoneNumber"],[1,1445,117,61,"auth"],[1,1447,117,65,"auth"],[1,1452,117,67,"phoneNumber"],[1,1454,117,80,"recaptchaVerifier"],[1,1456,119,4],[1,1457,119,6],[1,1463,119,13,"error"],[1,1466,121,6],[1,1472,120,6,"console"],[1,1480,120,14,"error"],[1,1486,120,20],[1,1507,120,42,"error"],[1,1510,121,12,"error"],[1,1511,122,4],[1,1514,223,8,"verifyOTP"],[1,1524,125,20,"async"],[1,1530,125,27,"confirmationResult"],[1,1532,125,67,"code"],[1,1537,126,4],[1,1541,128,6],[1,1556,127,27,"confirmationResult"],[1,1558,127,46,"confirm"],[1,1566,127,54,"code"],[1,1570,128,22,"user"],[1,1574,129,4],[1,1575,129,6],[1,1581,129,13,"error"],[1,1584,131,6],[1,1591,130,6,"console"],[1,1599,130,14,"error"],[1,1605,130,20],[1,1628,130,44,"error"],[1,1632,131,13],[1,1633,132,4],[1,1636,224,8,"signInWithGoogle"],[1,1653,135,27,"async"],[1,1663,137,4],[1,1666,137,8,"isDemoMode"],[1,1668,137,18,"isDemoMode"],[1,1679,138,6],[1,1686,138,13,"signInDemo"],[1,1690,141,4],[1,1694,142,6],[1,1697,142,35,"auth"],[1,1699,142,39,"auth"],[1,1704,142,41],[1,1705,143,8],[1,1711,143,14,"provider"],[1,1713,143,25],[1,1717,143,29,"GoogleAuthProvider"],[1,1719,143,47,"GoogleAuthProvider"],[1,1738,144,8,"provider"],[1,1740,144,17,"addScope"],[1,1749,144,26],[1,1758,145,8,"provider"],[1,1760,145,17,"addScope"],[1,1769,145,26],[1,1780,147,8],[1,1784,150,10],[1,1799,149,31],[1,1801,149,31,"signInWithPopup"],[1,1803,149,46,"signInWithPopup"],[1,1820,149,47,"auth"],[1,1822,149,51,"auth"],[1,1827,149,53,"provider"],[1,1831,150,26,"user"],[1,1835,151,8],[1,1836,151,10],[1,1842,151,17,"popupError"],[1,1845,153,10],[1,1848,153,34],[1,1871,153,14,"popupError"],[1,1873,153,25,"code"],[1,1879,153,78],[1,1909,153,58,"popupError"],[1,1911,153,69,"code"],[1,1916,155,12],[1,1929,154,18],[1,1931,154,18,"signInWithRedirect"],[1,1933,154,36,"signInWithRedirect"],[1,1953,154,37,"auth"],[1,1955,154,41,"auth"],[1,1960,154,43,"provider"],[1,1964,155,19],[1,1966,157,10],[1,1972,157,16,"popupError"],[1,1973,158,8],[1,1974,159,6],[1,1975,160,6],[1,1982,160,13],[1,1983,161,4],[1,1984,161,6],[1,1990,161,13,"error"],[1,1993,163,6],[1,1999,162,6,"console"],[1,2007,162,14,"error"],[1,2013,162,20],[1,2045,162,53,"error"],[1,2048,163,12,"error"],[1,2049,164,4],[1,2052,225,8,"signInDemo"],[1,2065,226,8,"signOut"],[1,2073,182,18,"async"],[1,2083,183,4],[1,2087,184,6],[1,2090,184,10,"isDemoMode"],[1,2092,184,20,"isDemoMode"],[1,2103,189,8],[1,2110,185,8,"setUser"],[1,2112,185,16],[1,2118,186,8,"setToken"],[1,2120,186,17],[1,2132,187,14,"AsyncStorage"],[1,2134,187,26,"default"],[1,2142,187,27,"removeItem"],[1,2153,187,38],[1,2180,188,14,"AsyncStorage"],[1,2182,188,26,"default"],[1,2190,188,27,"removeItem"],[1,2201,188,38],[1,2214,192,10,"auth"],[1,2216,192,14,"auth"],[1,2228,193,14],[1,2230,193,14,"firebaseSignOut"],[1,2232,193,29,"signOut"],[1,2241,193,30,"auth"],[1,2243,193,34,"auth"],[1,2255,195,12,"AsyncStorage"],[1,2257,195,24,"default"],[1,2265,195,25,"removeItem"],[1,2276,195,36],[1,2288,196,4],[1,2289,196,6],[1,2295,196,13,"error"],[1,2298,197,6,"console"],[1,2306,197,14,"error"],[1,2312,197,20],[1,2333,197,42,"error"],[1,2335,198,4],[1,2338,227,8,"refreshToken"],[1,2351,201,23,"async"],[1,2361,202,4],[1,2364,202,8,"isDemoMode"],[1,2366,202,18,"isDemoMode"],[1,2377,203,6],[1,2383,203,13],[1,2414,206,4],[1,2417,206,8,"user"],[1,2419,206,14],[1,2420,207,6],[1,2426,207,12,"newToken"],[1,2434,207,29,"user"],[1,2436,207,34,"getIdToken"],[1,2448,207,45],[1,2451,210,6],[1,2458,208,6,"setToken"],[1,2460,208,15,"newToken"],[1,2469,209,12,"AsyncStorage"],[1,2471,209,24,"default"],[1,2479,209,25,"setItem"],[1,2487,209,33],[1,2499,209,46,"newToken"],[1,2502,210,13,"newToken"],[1,2503,211,4],[1,2504,212,4],[1,2511,212,11],[1,2518,228,8,"children"],[1,2527,230,7,"children"],[1,2530,233,0],[1,2532,235,0,"_e"],[1,2535,235,0,"useAuth"],[1,2543,235,7],[1,2554,236,2],[1,2560,236,8,"context"],[1,2563,236,18],[1,2565,236,18,"useContext"],[1,2567,236,28,"useContext"],[1,2579,236,29,"AuthContext"],[1,2582,237,2],[1,2590,237,18,"undefined"],[1,2594,237,6,"context"],[1,2596,238,4],[1,2602,238,10],[1,2606,238,14,"Error"],[1,2612,238,20],[1,2659,240,2],[1,2666,240,9,"context"],[1,2667,241,0],[1,2669,1,0],[1,2673],[1,2675,1,0,"_react"],[1,2677,1,0,"r"],[1,2679,1,0,"d"],[1,2681,1,0],[1,2685,2,0,"_configFirebase"],[1,2687,2,0,"r"],[1,2689,2,0,"d"],[1,2691,2,0],[1,2695,3,0,"_firebaseAuth"],[1,2697,3,0,"r"],[1,2699,3,0,"d"],[1,2701,3,0],[1,2705,18,0,"_reactNativeAsyncStorageAsyncStorage"],[1,2707,18,0,"r"],[1,2709,18,0,"d"],[1,2711,18,0],[1,2715,18,0,"AsyncStorage"],[1,2718],[1,2720,18,0,"_reactNativeAsyncStorageAsyncStorage"],[1,2724],[1,2751,18,69,"r"],[1,2753,18,69,"d"],[1,2755,18,69],[1,2763,18,69,"_reactJsxRuntime"],[1,2765,18,69,"r"],[1,2767,18,69,"d"],[1,2769,18,69],[1,2773,22,0],[1,2779,22,6,"DEMO_USER"],[1,2781,22,18],[1,2782,23,2,"uid"],[1,2786,23,7],[1,2802,24,2,"email"],[1,2808,24,9],[1,2832,25,2,"displayName"],[1,2844,25,15],[1,2856,26,2,"phoneNumber"],[1,2868,26,15],[1,2882,27,2,"photoURL"],[1,2891,27,12],[1,2896,28,2,"emailVerified"],[1,2911,28,17],[1,2913,29,2,"getIdToken"],[1,2924,29,14,"async"],[1,2933,29,26],[1,2964,30,2,"getIdTokenResult"],[1,2981,30,20,"async"],[1,2991,30,20],[1,2992,30,35,"token"],[1,2998,30,42],[1,3029,30,74,"claims"],[1,3036,30,82],[1,3037,30,83],[1,3042,46,6,"AuthContext"],[1,3045,46,20],[1,3047,46,20,"createContext"],[1,3049,46,33,"createContext"],[1,3069,46,63,"undefined"],[1,3071,241,1],[1,3074]],"functionMap":{"names":["<global>","getIdToken","getIdTokenResult","AuthProvider","useEffect$argument_0","AsyncStorage.getItem.then$argument_0","onAuthStateChanged$argument_1","getRedirectResult.then$argument_0","getRedirectResult.then._catch$argument_0","sendOTP","confirm","verifyOTP","signInWithGoogle","signInDemo","signOut","refreshToken","useAuth"],"mappings":"AAA;cC4B,0CD;oBEC,mEF;OGkB;YCK;gDCG;ODM;iDEU;KFW;mCGI;OHI,QI;OJE;GDI;kBME;iBCK;SDM;GNa;oBQE;GRQ;2BSE;GT8B;qBUG;GVY;kBWE;GXiB;uBYE;GZY;CHoB;OgBE;ChBM"},"hasCjsExports":false},"type":"js/module"}]}