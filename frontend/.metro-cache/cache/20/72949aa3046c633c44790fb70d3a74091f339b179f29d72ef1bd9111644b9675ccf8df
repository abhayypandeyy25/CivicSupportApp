{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../config/firebase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":42,"index":132}}],"key":"K/SZPG5sPeV1upVh8dao26aG7MQ=","exportNames":["*"],"imports":1}},{"name":"firebase/auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":133},"end":{"line":14,"column":23,"index":379}}],"key":"o2UvaebosmgxImAY7KlhPO3FnYs=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0,"index":380},"end":{"line":15,"column":69,"index":449}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _configFirebase = require(_dependencyMap[1], \"../config/firebase\");\n  var _firebaseAuth = require(_dependencyMap[2], \"firebase/auth\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[4], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactJsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [token, setToken] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      const unsubscribe = (0, _firebaseAuth.onAuthStateChanged)(_configFirebase.auth, async user => {\n        setUser(user);\n        if (user) {\n          const idToken = await user.getIdToken();\n          setToken(idToken);\n          await AsyncStorage.default.setItem('userToken', idToken);\n        } else {\n          setToken(null);\n          await AsyncStorage.default.removeItem('userToken');\n        }\n        setLoading(false);\n      });\n      return unsubscribe;\n    }, []);\n    const sendOTP = async phoneNumber => {\n      try {\n        if (Platform.default.OS === 'web') {\n          // For web, we need RecaptchaVerifier\n          const recaptchaVerifier = new _firebaseAuth.RecaptchaVerifier(_configFirebase.auth, 'recaptcha-container', {\n            size: 'invisible'\n          });\n          const confirmationResult = await (0, _firebaseAuth.signInWithPhoneNumber)(_configFirebase.auth, phoneNumber, recaptchaVerifier);\n          return confirmationResult;\n        }\n        // For native, Firebase handles verification differently\n        // This is a simplified version - in production you'd use expo-firebase-recaptcha\n        return null;\n      } catch (error) {\n        console.error('Error sending OTP:', error);\n        throw error;\n      }\n    };\n    const verifyOTP = async (confirmationResult, code) => {\n      try {\n        const result = await confirmationResult.confirm(code);\n        return !!result.user;\n      } catch (error) {\n        console.error('Error verifying OTP:', error);\n        return false;\n      }\n    };\n    const signInWithGoogle = async () => {\n      try {\n        if (Platform.default.OS === 'web') {\n          const provider = new _firebaseAuth.GoogleAuthProvider();\n          const result = await (0, _firebaseAuth.signInWithPopup)(_configFirebase.auth, provider);\n          return !!result.user;\n        }\n        // For native, we'll handle this differently\n        return false;\n      } catch (error) {\n        console.error('Error signing in with Google:', error);\n        return false;\n      }\n    };\n    const signOut = async () => {\n      try {\n        await (0, _firebaseAuth.signOut)(_configFirebase.auth);\n        await AsyncStorage.default.removeItem('userToken');\n      } catch (error) {\n        console.error('Error signing out:', error);\n      }\n    };\n    const refreshToken = async () => {\n      if (user) {\n        const newToken = await user.getIdToken(true);\n        setToken(newToken);\n        await AsyncStorage.default.setItem('userToken', newToken);\n        return newToken;\n      }\n      return null;\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        token,\n        sendOTP,\n        verifyOTP,\n        signInWithGoogle,\n        signOut,\n        refreshToken\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":128,"map":[[13,2,31,0,"exports"],[13,9,31,0],[13,10,31,0,"AuthProvider"],[13,22,31,0],[13,25,31,0,"AuthProvider"],[13,37,31,0],[14,2,134,0,"exports"],[14,9,134,0],[14,10,134,0,"useAuth"],[14,17,134,0],[14,20,134,0,"useAuth"],[14,27,134,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_configFirebase"],[16,21,2,0],[16,24,2,0,"require"],[16,31,2,0],[16,32,2,0,"_dependencyMap"],[16,46,2,0],[17,2,3,0],[17,6,3,0,"_firebaseAuth"],[17,19,3,0],[17,22,3,0,"require"],[17,29,3,0],[17,30,3,0,"_dependencyMap"],[17,44,3,0],[18,2,15,0],[18,6,15,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,15,0],[18,45,15,0,"require"],[18,52,15,0],[18,53,15,0,"_dependencyMap"],[18,67,15,0],[19,2,15,0],[19,6,15,0,"AsyncStorage"],[19,18,15,0],[19,21,15,0,"_interopDefault"],[19,36,15,0],[19,37,15,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,15,0],[20,2,15,69],[20,6,15,69,"_reactNativeWebDistExportsPlatform"],[20,40,15,69],[20,43,15,69,"require"],[20,50,15,69],[20,51,15,69,"_dependencyMap"],[20,65,15,69],[21,2,15,69],[21,6,15,69,"Platform"],[21,14,15,69],[21,17,15,69,"_interopDefault"],[21,32,15,69],[21,33,15,69,"_reactNativeWebDistExportsPlatform"],[21,67,15,69],[22,2,15,69],[22,6,15,69,"_reactJsxDevRuntime"],[22,25,15,69],[22,28,15,69,"require"],[22,35,15,69],[22,36,15,69,"_dependencyMap"],[22,50,15,69],[23,2,29,0],[23,8,29,6,"AuthContext"],[23,19,29,17],[23,35,29,20],[23,39,29,20,"createContext"],[23,45,29,33],[23,46,29,33,"createContext"],[23,59,29,33],[23,61,29,63,"undefined"],[23,70,29,72],[23,71,29,73],[24,2,31,7],[24,11,31,16,"AuthProvider"],[24,23,31,28,"AuthProvider"],[24,24,31,29],[25,4,31,31,"children"],[26,2,31,65],[26,3,31,66],[26,5,31,68],[27,4,32,2],[27,10,32,8],[27,11,32,9,"user"],[27,15,32,13],[27,17,32,15,"setUser"],[27,24,32,22],[27,25,32,23],[27,28,32,26],[27,32,32,26,"useState"],[27,38,32,34],[27,39,32,34,"useState"],[27,47,32,34],[27,49,32,48],[27,53,32,52],[27,54,32,53],[28,4,33,2],[28,10,33,8],[28,11,33,9,"loading"],[28,18,33,16],[28,20,33,18,"setLoading"],[28,30,33,28],[28,31,33,29],[28,34,33,32],[28,38,33,32,"useState"],[28,44,33,40],[28,45,33,40,"useState"],[28,53,33,40],[28,55,33,41],[28,59,33,45],[28,60,33,46],[29,4,34,2],[29,10,34,8],[29,11,34,9,"token"],[29,16,34,14],[29,18,34,16,"setToken"],[29,26,34,24],[29,27,34,25],[29,30,34,28],[29,34,34,28,"useState"],[29,40,34,36],[29,41,34,36,"useState"],[29,49,34,36],[29,51,34,52],[29,55,34,56],[29,56,34,57],[30,4,36,2],[30,8,36,2,"useEffect"],[30,14,36,11],[30,15,36,11,"useEffect"],[30,24,36,11],[30,26,36,12],[30,32,36,18],[31,6,37,4],[31,12,37,10,"unsubscribe"],[31,23,37,21],[31,26,37,24],[31,30,37,24,"onAuthStateChanged"],[31,43,37,42],[31,44,37,42,"onAuthStateChanged"],[31,62,37,42],[31,64,37,43,"auth"],[31,79,37,47],[31,80,37,47,"auth"],[31,84,37,47],[31,86,37,49],[31,92,37,56,"user"],[31,96,37,60],[31,100,37,65],[32,8,38,6,"setUser"],[32,15,38,13],[32,16,38,14,"user"],[32,20,38,18],[32,21,38,19],[33,8,39,6],[33,12,39,10,"user"],[33,16,39,14],[33,18,39,16],[34,10,40,8],[34,16,40,14,"idToken"],[34,23,40,21],[34,26,40,24],[34,32,40,30,"user"],[34,36,40,34],[34,37,40,35,"getIdToken"],[34,47,40,45],[34,48,40,46],[34,49,40,47],[35,10,41,8,"setToken"],[35,18,41,16],[35,19,41,17,"idToken"],[35,26,41,24],[35,27,41,25],[36,10,42,8],[36,16,42,14,"AsyncStorage"],[36,28,42,26],[36,29,42,26,"default"],[36,36,42,26],[36,37,42,27,"setItem"],[36,44,42,34],[36,45,42,35],[36,56,42,46],[36,58,42,48,"idToken"],[36,65,42,55],[36,66,42,56],[37,8,43,6],[37,9,43,7],[37,15,43,13],[38,10,44,8,"setToken"],[38,18,44,16],[38,19,44,17],[38,23,44,21],[38,24,44,22],[39,10,45,8],[39,16,45,14,"AsyncStorage"],[39,28,45,26],[39,29,45,26,"default"],[39,36,45,26],[39,37,45,27,"removeItem"],[39,47,45,37],[39,48,45,38],[39,59,45,49],[39,60,45,50],[40,8,46,6],[41,8,47,6,"setLoading"],[41,18,47,16],[41,19,47,17],[41,24,47,22],[41,25,47,23],[42,6,48,4],[42,7,48,5],[42,8,48,6],[43,6,50,4],[43,13,50,11,"unsubscribe"],[43,24,50,22],[44,4,51,2],[44,5,51,3],[44,7,51,5],[44,9,51,7],[44,10,51,8],[45,4,53,2],[45,10,53,8,"sendOTP"],[45,17,53,15],[45,20,53,18],[45,26,53,25,"phoneNumber"],[45,37,53,44],[45,41,53,85],[46,6,54,4],[46,10,54,8],[47,8,55,6],[47,12,55,10,"Platform"],[47,20,55,18],[47,21,55,18,"default"],[47,28,55,18],[47,29,55,19,"OS"],[47,31,55,21],[47,36,55,26],[47,41,55,31],[47,43,55,33],[48,10,56,8],[49,10,57,8],[49,16,57,14,"recaptchaVerifier"],[49,33,57,31],[49,36,57,34],[49,40,57,38,"RecaptchaVerifier"],[49,53,57,55],[49,54,57,55,"RecaptchaVerifier"],[49,71,57,55],[49,72,57,56,"auth"],[49,87,57,60],[49,88,57,60,"auth"],[49,92,57,60],[49,94,57,62],[49,115,57,83],[49,117,57,85],[50,12,58,10,"size"],[50,16,58,14],[50,18,58,16],[51,10,59,8],[51,11,59,9],[51,12,59,10],[52,10,60,8],[52,16,60,14,"confirmationResult"],[52,34,60,32],[52,37,60,35],[52,43,60,41],[52,47,60,41,"signInWithPhoneNumber"],[52,60,60,62],[52,61,60,62,"signInWithPhoneNumber"],[52,82,60,62],[52,84,60,63,"auth"],[52,99,60,67],[52,100,60,67,"auth"],[52,104,60,67],[52,106,60,69,"phoneNumber"],[52,117,60,80],[52,119,60,82,"recaptchaVerifier"],[52,136,60,99],[52,137,60,100],[53,10,61,8],[53,17,61,15,"confirmationResult"],[53,35,61,33],[54,8,62,6],[55,8,63,6],[56,8,64,6],[57,8,65,6],[57,15,65,13],[57,19,65,17],[58,6,66,4],[58,7,66,5],[58,8,66,6],[58,15,66,13,"error"],[58,20,66,18],[58,22,66,20],[59,8,67,6,"console"],[59,15,67,13],[59,16,67,14,"error"],[59,21,67,19],[59,22,67,20],[59,42,67,40],[59,44,67,42,"error"],[59,49,67,47],[59,50,67,48],[60,8,68,6],[60,14,68,12,"error"],[60,19,68,17],[61,6,69,4],[62,4,70,2],[62,5,70,3],[63,4,72,2],[63,10,72,8,"verifyOTP"],[63,19,72,17],[63,22,72,20],[63,28,72,20,"verifyOTP"],[63,29,72,27,"confirmationResult"],[63,47,72,65],[63,49,72,67,"code"],[63,53,72,79],[63,58,72,102],[64,6,73,4],[64,10,73,8],[65,8,74,6],[65,14,74,12,"result"],[65,20,74,18],[65,23,74,21],[65,29,74,27,"confirmationResult"],[65,47,74,45],[65,48,74,46,"confirm"],[65,55,74,53],[65,56,74,54,"code"],[65,60,74,58],[65,61,74,59],[66,8,75,6],[66,15,75,13],[66,16,75,14],[66,17,75,15,"result"],[66,23,75,21],[66,24,75,22,"user"],[66,28,75,26],[67,6,76,4],[67,7,76,5],[67,8,76,6],[67,15,76,13,"error"],[67,20,76,18],[67,22,76,20],[68,8,77,6,"console"],[68,15,77,13],[68,16,77,14,"error"],[68,21,77,19],[68,22,77,20],[68,44,77,42],[68,46,77,44,"error"],[68,51,77,49],[68,52,77,50],[69,8,78,6],[69,15,78,13],[69,20,78,18],[70,6,79,4],[71,4,80,2],[71,5,80,3],[72,4,82,2],[72,10,82,8,"signInWithGoogle"],[72,26,82,24],[72,29,82,27],[72,35,82,27,"signInWithGoogle"],[72,36,82,27],[72,41,82,57],[73,6,83,4],[73,10,83,8],[74,8,84,6],[74,12,84,10,"Platform"],[74,20,84,18],[74,21,84,18,"default"],[74,28,84,18],[74,29,84,19,"OS"],[74,31,84,21],[74,36,84,26],[74,41,84,31],[74,43,84,33],[75,10,85,8],[75,16,85,14,"provider"],[75,24,85,22],[75,27,85,25],[75,31,85,29,"GoogleAuthProvider"],[75,44,85,47],[75,45,85,47,"GoogleAuthProvider"],[75,63,85,47],[75,64,85,48],[75,65,85,49],[76,10,86,8],[76,16,86,14,"result"],[76,22,86,20],[76,25,86,23],[76,31,86,29],[76,35,86,29,"signInWithPopup"],[76,48,86,44],[76,49,86,44,"signInWithPopup"],[76,64,86,44],[76,66,86,45,"auth"],[76,81,86,49],[76,82,86,49,"auth"],[76,86,86,49],[76,88,86,51,"provider"],[76,96,86,59],[76,97,86,60],[77,10,87,8],[77,17,87,15],[77,18,87,16],[77,19,87,17,"result"],[77,25,87,23],[77,26,87,24,"user"],[77,30,87,28],[78,8,88,6],[79,8,89,6],[80,8,90,6],[80,15,90,13],[80,20,90,18],[81,6,91,4],[81,7,91,5],[81,8,91,6],[81,15,91,13,"error"],[81,20,91,18],[81,22,91,20],[82,8,92,6,"console"],[82,15,92,13],[82,16,92,14,"error"],[82,21,92,19],[82,22,92,20],[82,53,92,51],[82,55,92,53,"error"],[82,60,92,58],[82,61,92,59],[83,8,93,6],[83,15,93,13],[83,20,93,18],[84,6,94,4],[85,4,95,2],[85,5,95,3],[86,4,97,2],[86,10,97,8,"signOut"],[86,17,97,15],[86,20,97,18],[86,26,97,18,"signOut"],[86,27,97,18],[86,32,97,30],[87,6,98,4],[87,10,98,8],[88,8,99,6],[88,14,99,12],[88,18,99,12,"firebaseSignOut"],[88,31,99,27],[88,32,99,27,"signOut"],[88,39,99,27],[88,41,99,28,"auth"],[88,56,99,32],[88,57,99,32,"auth"],[88,61,99,32],[88,62,99,33],[89,8,100,6],[89,14,100,12,"AsyncStorage"],[89,26,100,24],[89,27,100,24,"default"],[89,34,100,24],[89,35,100,25,"removeItem"],[89,45,100,35],[89,46,100,36],[89,57,100,47],[89,58,100,48],[90,6,101,4],[90,7,101,5],[90,8,101,6],[90,15,101,13,"error"],[90,20,101,18],[90,22,101,20],[91,8,102,6,"console"],[91,15,102,13],[91,16,102,14,"error"],[91,21,102,19],[91,22,102,20],[91,42,102,40],[91,44,102,42,"error"],[91,49,102,47],[91,50,102,48],[92,6,103,4],[93,4,104,2],[93,5,104,3],[94,4,106,2],[94,10,106,8,"refreshToken"],[94,22,106,20],[94,25,106,23],[94,31,106,23,"refreshToken"],[94,32,106,23],[94,37,106,59],[95,6,107,4],[95,10,107,8,"user"],[95,14,107,12],[95,16,107,14],[96,8,108,6],[96,14,108,12,"newToken"],[96,22,108,20],[96,25,108,23],[96,31,108,29,"user"],[96,35,108,33],[96,36,108,34,"getIdToken"],[96,46,108,44],[96,47,108,45],[96,51,108,49],[96,52,108,50],[97,8,109,6,"setToken"],[97,16,109,14],[97,17,109,15,"newToken"],[97,25,109,23],[97,26,109,24],[98,8,110,6],[98,14,110,12,"AsyncStorage"],[98,26,110,24],[98,27,110,24,"default"],[98,34,110,24],[98,35,110,25,"setItem"],[98,42,110,32],[98,43,110,33],[98,54,110,44],[98,56,110,46,"newToken"],[98,64,110,54],[98,65,110,55],[99,8,111,6],[99,15,111,13,"newToken"],[99,23,111,21],[100,6,112,4],[101,6,113,4],[101,13,113,11],[101,17,113,15],[102,4,114,2],[102,5,114,3],[103,4,116,2],[103,24,117,4],[103,28,117,4,"_reactJsxDevRuntime"],[103,47,117,4],[103,48,117,4,"jsxDEV"],[103,54,117,4],[103,56,117,5,"AuthContext"],[103,67,117,16],[103,68,117,17,"Provider"],[103,76,117,25],[104,6,118,6,"value"],[104,11,118,11],[104,13,118,13],[105,8,119,8,"user"],[105,12,119,12],[106,8,120,8,"loading"],[106,15,120,15],[107,8,121,8,"token"],[107,13,121,13],[108,8,122,8,"sendOTP"],[108,15,122,15],[109,8,123,8,"verifyOTP"],[109,17,123,17],[110,8,124,8,"signInWithGoogle"],[110,24,124,24],[111,8,125,8,"signOut"],[111,15,125,15],[112,8,126,8,"refreshToken"],[113,6,127,6],[113,7,127,8],[114,6,127,8,"children"],[114,14,127,8],[114,16,129,7,"children"],[115,4,129,15],[116,6,129,15,"fileName"],[116,14,129,15],[116,16,129,15,"_jsxFileName"],[116,28,129,15],[117,6,129,15,"lineNumber"],[117,16,129,15],[118,6,129,15,"columnNumber"],[118,18,129,15],[119,4,129,15],[119,11,130,26],[119,12,130,27],[120,2,132,0],[121,2,134,7],[121,11,134,16,"useAuth"],[121,18,134,23,"useAuth"],[121,19,134,23],[121,21,134,26],[122,4,135,2],[122,10,135,8,"context"],[122,17,135,15],[122,20,135,18],[122,24,135,18,"useContext"],[122,30,135,28],[122,31,135,28,"useContext"],[122,41,135,28],[122,43,135,29,"AuthContext"],[122,54,135,40],[122,55,135,41],[123,4,136,2],[123,8,136,6,"context"],[123,15,136,13],[123,20,136,18,"undefined"],[123,29,136,27],[123,31,136,29],[124,6,137,4],[124,12,137,10],[124,16,137,14,"Error"],[124,21,137,19],[124,22,137,20],[124,67,137,65],[124,68,137,66],[125,4,138,2],[126,4,139,2],[126,11,139,9,"context"],[126,18,139,16],[127,2,140,0],[128,0,140,1],[128,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","onAuthStateChanged$argument_1","sendOTP","verifyOTP","signInWithGoogle","signOut","refreshToken","useAuth"],"mappings":"AAA;OC8B;YCK;iDCC;KDW;GDG;kBGE;GHiB;oBIE;GJQ;2BKE;GLa;kBME;GNO;uBOE;GPQ;CDkB;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}